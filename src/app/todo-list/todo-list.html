<h1>Todo List</h1>


@if (isLoading) {
<div class="loading">
    <span>Loading todos...</span>
</div>
} @else if (errorMessage) {
<div class="error">
    <strong>Error:</strong> {{ errorMessage }}
</div>
} @else if (todos.length === 0) {
<div class="no-todos">
    <p>No todos found. Start by adding your first todo!</p>
</div>
} @else {
<ul class="todo-list">
    @for (todo of todos; track todo.id) {
    <li class="todo-item" [class.completed]="todo.isCompleted">
        <div class="todo-content">
            <div class="todo-title">{{ todo.title }}</div>
            <div class="todo-description">{{ todo.description }}</div>
        </div>
        <div class="todo-status">
            <!-- Test button to verify clicks work
            <button class="test-btn" (click)="testClick(todo)"
                style="margin-right: 10px; padding: 4px 8px; font-size: 12px;">
                TEST
            </button> -->

            <button class="status-badge" [class.completed]="todo.isCompleted" [class.pending]="!todo.isCompleted"
                [class.clickable]="!todo.isCompleted" (click)="markAsCompleted(todo)" [disabled]="todo.isCompleted"
                title="{{todo.isCompleted ? 'Already completed' : 'Click to mark as completed'}}">
                {{ todo.isCompleted ? 'Completed' : 'Pending' }}
            </button>
        </div>
    </li>
    }
</ul>
}