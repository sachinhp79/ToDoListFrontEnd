<div class="add-todo-container">
    <h1>Add New Todo</h1>

    <!-- Success/Error Messages -->
    @if (successMessage) {
    <div class="form-message success">
        {{ successMessage }}
    </div>
    }

    @if (errorMessage) {
    <div class="form-message error">
        {{ errorMessage }}
    </div>
    }

    <form class="todo-form" (ngSubmit)="addTodoItem()" #todoForm="ngForm">
        <div class="form-group">
            <label for="title">Todo Title *</label>
            <input type="text" id="title" [(ngModel)]="newTodo.title" name="title"
                placeholder="Enter a descriptive title for your todo..." required #titleInput="ngModel"
                maxlength="100" />
            <small class="character-count">{{ newTodo.title?.length || 0 }}/100 characters</small>
            @if (titleInput.invalid && titleInput.touched) {
            <div class="validation-errors">
                @if (titleInput.errors?.['required']) {
                <small class="error-text">Title is required.</small>
                }
                @if (titleInput.errors?.['maxlength']) {
                <small class="error-text">Max 100 characters allowed.</small>
                }
            </div>
            }
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" [(ngModel)]="newTodo.description" name="description" maxlength="500"
                placeholder="Add more details about your todo (optional)..." rows="4"></textarea>
            <small class="character-count">{{ newTodo.description?.length || 0 }}/500 characters</small>
        </div>

        <div class="form-group">
            <label>Status</label>
            <div class="checkbox-wrapper">
                <input type="checkbox" id="isCompleted" [(ngModel)]="newTodo.isCompleted" name="isCompleted" />
                <label for="isCompleted" class="checkbox-label">
                    Mark as completed
                </label>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn-submit" [disabled]="!newTodo.title?.trim() || isSubmitting">
                @if (isSubmitting) {
                Adding Todo...
                } @else {
                Add Todo Item
                }
            </button>

            <button type="button" class="btn-clear" (click)="clearForm()" [disabled]="isSubmitting">
                Clear Form
            </button>
        </div>
    </form>
</div>